

# 接口文档

## （√）学生登录/student/login

URL:/student/login

请求方法:POST

返回格式:JSON

#### 请求参数:

| 名称    | 类型   | 必填 | 说明 |
| ------- | ------ | ---- | ---- |
| stuID   | string | 是   | 学号 |
| stuPass | string | 是   | 密码 |

#### 返回参数:

| 名称        | 类型    | 说明                                   |
| ----------- | ------- | -------------------------------------- |
| success     | boolean | 是否登录成功(成功为 true,失败为 false) |
| passChanged | int     | 是否修改过密码(修改过为 1,未修改为 0)  |

#### 示例:

请求参数:

```javascript
{
  stuID: '201701010101',
  stuPass: '123456'
}
```

返回参数:

```javascript
{
  success: true,
  passChanged: true
}
```

## （√）学生修改密码/student/changePass

URL:/student/changePass

请求方法:POST

返回格式:JSON

#### 请求参数:

| 名称    | 类型   | 必填 | 说明   |
| ------- | ------ | ---- | ------ |
| stuID   | string | 是   | 学号   |
| oldPass | string | 是   | 原密码 |
| newPass | string | 是   | 新密码 |

#### 返回参数:

| 名称    | 类型    | 说明                               |
| ------- | ------- | ---------------------------------- |
| success | boolean | 是否成功(成功为 true,失败为 false) |

#### 示例:

请求参数:

```javascript
{
  stuID: '201701010101',
  oldPass: '123456',
  newPass:'654321'
}
```

返回参数:

```javascript
{
  success: true
}
```

## （√）学生填写基本信息/student/info

URL:/student/info

请求方法:

返回格式:JSON

<u>_信息修改次数:stuInfoModTime (?)_</u>

#### 请求参数:

| 名称         | 类型              | 必填 | 说明                                                  |
| ------------ | ----------------- | ---- | ----------------------------------------------------- |
| stuID        | string            | 是   | 学号                                                  |
| tutorType    | string            | 是   | 导师类型(regular/graduate)                            |
| tableList    | tableList对象数组 | 是   | 记录了所有table对象的键名和可能存在的中文名组成的列表 |
| profileTable | table对象         | 否   | 由文件对象组成                                        |
| choiceTable  | table对象         | 否   | 由文件对象组成                                        |
| ...          |                   |      | 可能还有其他table对象                                 |

tableList对象:

| 名称  | 类型   | 必填 | 说明             |
| ----- | ------ | ---- | ---------------- |
| name  | string | 是   | table对象的键名  |
| title | string | 否   | 可能存在的中文名 |

table对象:

| 名称     | 类型         | 必填 | 说明                                                     |
| -------- | ------------ | ---- | -------------------------------------------------------- |
| fileList | 文件对象列表 | 是   | 由文件对象组成                                           |
| flag     | boolean      | 否   | 这项个人信息是否填写完毕(完毕为 true,未填写完整为 false) |

文件对象:

| 名称   | 类型   | 必填 | 说明                                                         |
| ------ | ------ | ---- | ------------------------------------------------------------ |
| url    | string | 是   | 文件url                                                      |
| name   | string | 是   | 文件名                                                       |
| status | string | 否   | 文件的传输状态(elementUI中的上传组件中的文件自带的,暂时只看到:'success') |
| size   | int    | 否   | 文件大小                                                     |

#### 返回参数:

| 名称    | 类型    | 说明                               |
| ------- | ------- | ---------------------------------- |
| success | boolean | 是否成功(成功为 true,失败为 false) |

#### 示例:

请求参数:

```javascript
{
  	stuID:"dsgsdg",
  	tutorType:"graduate",
    tableList:[{
        name:"profileTable",
        title:"学生个人简介表"
    },{
        name:"choiceTable",
    }],
  	profileTable:
    {
        flag:true,
        fileList:[{
  			url:"abcabcabcabcabcabcabcabc",
    		name:"caster.jpg",status:"success"
  		},{ 
        	url: "http://localhost:8080/downloadFile?filename=saidgihkdglha&oldname=va11halla.png", 
        	name: "caster.jpg", 
        	status: "success", 
        	size: 1447144 
    	}]
    }
  	choiceTable:
	{
        flag:true,  
        fileList:[{
			url:"abcabcabcabcabcabcabcabc",
      		name:"caster.jpg","status":"success"
  		}]
    }
}
```

返回参数:

```javascript
{
  success: true
}
```

## （√）本科导师选择/student/regular

URL:/student/regular

请求方法:

返回格式:JSON

#### 请求参数:

| 名称           | 类型    | 必填 | 说明                                     |
| -------------- | ------- | ---- | ---------------------------------------- |
| stuID          | string  | 是   | 学生学号                                 |
| firstChoice    | string  | 是   | 第一志愿导师编号                         |
| secondChoice   | string  | 否   | 第二志愿导师编号                         |
| isRedistribute | boolean | 是   | 是否接受调剂(接受为 true,不接受为 false) |

#### 返回参数:

| 名称    | 类型    | 说明                               |
| ------- | ------- | ---------------------------------- |
| success | boolean | 是否成功(成功为 true,失败为 false) |

#### 示例:

请求参数:

```javascript
{
  stuID: "201701010101",
  firstChoice: "qsxqx",
  secondChoice: "mjogo",
  isRedistribute: false
}
```

返回参数:

```javascript
{
  success: true
}
```

## （√）毕业导师选择/student/graduate

URL:/student/graduate

请求方法:

返回格式:JSON

#### 请求参数:

| 名称           | 类型    | 必填 | 说明                                     |
| -------------- | ------- | ---- | ---------------------------------------- |
| stuID          | string  | 是   | 学生学号                                 |
| firstChoice    | string  | 是   | 第一志愿导师编号                         |
| secondChoice   | string  | 否   | 第二志愿导师编号                         |
| isRedistribute | boolean | 是   | 是否接受调剂(接受为 true,不接受为 false) |

#### 返回参数:

| 名称    | 类型    | 说明                               |
| ------- | ------- | ---------------------------------- |
| success | boolean | 是否成功(成功为 true,失败为 false) |

#### 示例:

请求参数:

```javascript
{
  stuID: "201701010101",
  firstChoice: "qsxqx",
  secondChoice: "mjogo",
  isRedistribute: false
}
```

返回参数:

```javascript
{
  success: true
}
```

## （√）查询所有可选导师/student/allteacher

URL:/student/allteacher

请求方法:POST

返回格式:JSON

#### 请求参数:

| 名称       | 类型   | 必填 | 说明                       |
| ---------- | ------ | ---- | -------------------------- |
| type       | string | 否   | 导师类型(regular/graduate) |
| department | string | 否   | 导师部门（研究所)          |

#### 返回参数:

| 名称      | 类型    | 说明                                             |
| --------- | ------- | ------------------------------------------------ |
| tutorList | array[] | 导师信息数组,每个成员都是一个 teacherObject 对象 |

teacherObject:

| 名称       | 类型   | 说明                |
| ---------- | ------ | ------------------- |
| id         | string | 教师 ID             |
| name       | string | 教师姓名            |
| department | string | 教师所在部门/研究所 |
| search     | string | 教师研究方向        |
| contact    | string | 联系方式            |
| isgraduate | bool   | 是否为毕业导师      |
| isregular  | bool   | 是否为本科导师      |

#### 示例:

请求参数:

```javascript
{
  //可能没有参数
  type: "regular"
  department:"软件研究所"
}
```

返回参数:

```javascript
{
  tutorList: [
    {
      id: "qsxqx",
      name: "pbml",
      department: "dul",
      search: "hebm",
      contact: "ixt"
    },
    {
      id: "mjogo",
      name: "hlbnd",
      department: "cig",
      search: "xsmj",
      contact: "lcnfl"
    },
    {
      id: "iadh",
      name: "umjnd",
      department: "nrmc",
      search: "vdgn",
      contact: "lcpbq"
    }
  ];
}
```



## (√)查询已提交的个人信息/student/queryinfo

URL:/student/queryinfo

请求方法:

返回格式:JSON

#### 请求参数:

| 名称      | 类型   | 必填 | 说明                          |
| --------- | ------ | ---- | ----------------------------- |
| stuID     | string | 是   | 学生学号                      |
| tutorType | string | 是   | 导师类别(如 regular/graduate) |

#### 返回参数:

| 名称         | 类型              | 必填 | 说明                                                  |
| ------------ | ----------------- | ---- | ----------------------------------------------------- |
| tableList    | tableList对象数组 | 是   | 记录了所有table对象的键名和可能存在的中文名组成的列表 |
| profileTable | table对象         | 否   | 可以允许记录数个文件                                  |
| choiceTable  | table对象         | 否   | 可以允许记录数个文件                                  |
| ...          |                   |      | 可能有其他table对象                                   |

tableList对象:

| 名称  | 类型   | 必填 | 说明             |
| ----- | ------ | ---- | ---------------- |
| name  | string | 是   | table对象的键名  |
| title | string | 否   | 可能存在的中文名 |

table对象:

| 名称     | 类型         | 必填 | 说明                                                     |
| -------- | ------------ | ---- | -------------------------------------------------------- |
| flag     | boolean      | 否   | 这项个人信息是否填写完毕(完毕为 true,未填写完整为 false) |
| fileList | 文件对象列表 | 是   | 由文件对象组成                                           |

文件对象:

| 名称   | 类型   | 必填 | 说明                                    |
| ------ | ------ | ---- | --------------------------------------- |
| url    | string | 是   | 文件 url                                |
| name   | string | 是   | 文件名                                  |
| status | string | 否   | 文件的传输状态(暂时没用 'success'/... ) |
| size   | int    | 否   | 文件大小                                |

#### 示例:

请求参数:

```javascript
{
  stuID: "201701010101",
  type: "regular"
}
```

返回参数:

```javascript
{
    tableList:[{
        name:'profileTable',
        title:'学生个人简介表'
    },{
        name:'choiceTable',
        title:'导师双向选择表'
    }],
    profileTable: {
      flag: true,
      fileList: [{
        name: 'caster.jpg',
        url: 'abcabcabcabcabcabcabcabc',
        status:'success',
        size:1141
      }]
    },
    choiceTable: {
      flag: true,
      fileList: [{
        name: 'caster.jpg',
        url: 'abcabcabcabcabcabcabcabc'
      }]
    }
}
```

## （√）查询已选导师/student/selected

URL:/student/selected

请求方法:POST

返回格式:JSON

#### 请求参数:

| 名称  | 类型   | 必填 | 说明                          |
| ----- | ------ | ---- | ----------------------------- |
| stuID | string | 是   | 学生学号                      |
| type  | string | 是   | 导师种类(如 regular/graduate) |

#### 返回参数:

| 名称           | 类型         | 说明                                     |
| -------------- | ------------ | ---------------------------------------- |
| firstChoice    | 导师信息对象 | 第一志愿                                 |
| secondChoice   | 导师信息对象 | 第二志愿                                 |
| isRedistribute | boolean      | 是否接受调剂(接受为 true,不接受为 false) |

导师信息对象:

| 名称       | 类型   | 说明                |
| ---------- | ------ | ------------------- |
| id         | string | 教师 ID             |
| name       | string | 教师姓名            |
| department | string | 教师所在部门/研究所 |
| search     | string | 教师研究方向        |
| contact    | string | 联系方式            |

#### 示例:

请求参数:

```javascript
{
  stuID: "201701010101",
  type: "regular"
}
```

返回参数:

```javascript
{
    firstChoice: {
      id: 'wci',
      name: 'gxi',
      department: 'zjyd',
      search: 'oyo',
      contact: 'smupx'
    },
    secondChoice: {
      id: 'tgjww',
      name: 'hcf',
      department: 'iuvm',
      search: 'xnadl',
      contact: 'qjeb'
    },
    isRedistribute:true
}
```

## （√）查询本人导师/student/mytutor

URL:/student/mytutor

请求方法:

返回格式:JSON

#### 请求参数:

| 名称  | 类型   | 必填 | 说明                          |
| ----- | ------ | ---- | ----------------------------- |
| stuID | string | 是   | 学生学号                      |
| type  | string | 是   | 导师种类(如 regular/graduate) |

#### 返回参数:

| 名称       | 类型   | 说明                |
| ---------- | ------ | ------------------- |
| id         | string | 教师 ID             |
| name       | string | 教师姓名            |
| department | string | 教师所在部门/研究所 |
| search     | string | 教师研究方向        |
| contact    | string | 联系方式            |

#### 示例:

请求参数:

```javascript
{
  stuID: "201701010101",
  type: "regular"
}
```

返回参数:

```javascript
{
    id: 'tgjww',
    name: 'hcf',
    department: 'iuvm',
    search: 'xnadl',
    contact: 'qjeb'
}
```

## （√）文件上传/uploadFile

URL:/uploadFile

请求方法:POST（前端采用 el-upload）

#### 请求参数:

由组件自动生成

#### 返回参数:

| 名称 | 二级名称     | 类型   | 说明                           |
| ---- | ------------ | ------ | ------------------------------ |
| code |              | int    | 状态码（上传成功默认为 20000） |
| file |              |        |                                |
|      | originalname | string | 上传时的文件名                 |
|      | newfilename  | string | 保存在服务器的文件名           |

#### 示例:

返回参数:

```javascript
{
    code: 20000,
    file: {
        originalname:'abc.doc',
        newfilename:'def.doc'
    }
}
```

## （√）文件下载/downloadFile

URL:/downloadFile

请求方法:GET

返回格式:JSON

#### 请求参数:|query|

| 名称     | 类型   | 必填 | 说明                   |
| -------- | ------ | ---- | ---------------------- |
| filename | string | 是   | 保存在服务器上的文件名 |
| oldname  | string | 是   | 下载时的重命名         |

http://127.0.0.1:3000/downloadFile?filename=bf19e3e3039f15e4118a1d1aa488c5f4.pdf&oldname=1.pdf



## （√）教师登录/teacher/login

URL:/teacher/login

请求方法:POST

返回格式:JSON

#### 请求参数:

| 名称    | 类型   | 必填 | 说明     |
| ------- | ------ | ---- | -------- |
| teaNum  | string | 是   | 学号     |
| teaPass | string | 是   | 教师编号 |

#### 返回参数:

| 名称    | 类型    | 说明                                   |
| ------- | ------- | -------------------------------------- |
| success | boolean | 是否登录成功(成功为 true,失败为 false) |

#### 示例:

请求参数:

```javascript
{
  teaNum: '199901010101',
  teaPass: '123456'
}
```

返回参数:

```javascript
{
  success: true
}
```



## （√）查询教师信息/teacher/info

URL:/teacher/info

请求方法:POST

返回格式:JSON

#### 请求参数:

| 名称  | 类型   | 必填 | 说明     |
| ----- | ------ | ---- | -------- |
| teaID | string | 是   | 教师编号 |

#### 返回参数:

| 名称       | 类型    | 说明                |
| ---------- | ------- | ------------------- |
| name       | string  | 教师姓名            |
| department | string  | 教师所在部门/研究所 |
| search     | string  | 教师研究方向        |
| contact    | string  | 联系方式            |
| isgraduate | boolean | 是否为毕业导师      |
| isregular  | boolean | 是否为本科导师      |

#### 示例:

请求参数:

```javascript
{
  teaID: "199901010101"
}
```

返回参数:

```javascript
{
    name: 'hcf',
    department: 'iuvm',
    search: 'xnadl',
    contact: 'qjeb'
}
```



## （√）修改教师信息/teacher/changeinfo

URL:/teacher/changeinfo

请求方法:POST

返回格式:JSON

#### 请求参数:

| 名称       | 类型   | 必填 | 说明                                                        |
| ---------- | ------ | ---- | ----------------------------------------------------------- |
| teaID      | string | 是   | 教师编号(这个值不会被修改,而是用来表示修改了哪个教师的信息) |
| name       | string | 是   | 教师姓名                                                    |
| department | string | 是   | 教师所在部门/研究所                                         |
| search     | string | 是   | 教师研究方向                                                |
| contact    | string | 是   | 联系方式                                                    |

#### 返回参数:

| 名称    | 类型    | 说明     |
| ------- | ------- | -------- |
| success | boolean | 修改成功 |

#### 示例:

请求参数:

```javascript
{
  	teaID: "199901010101",
    name: 'hcf',
    department: 'iuvm',
    search: 'xnadl',
    contact: 'qjeb'
}
```

返回参数:

```javascript
{
    success:true
}
```



## 查询志愿的学生信息/teacher/stuinfo

URL:/teacher/stuinfo

请求方法:POST

返回格式:JSON

#### 请求参数:

| 名称  | 类型   | 必填 | 说明                          |
| ----- | ------ | ---- | ----------------------------- |
| teaID | string | 是   | 学生学号                      |
| type  | string | 是   | 导师类别(如 regular/graduate) |

#### 返回参数:

| 名称    | 类型         | 说明           |
| ------- | ------------ | -------------- |
| stuList | 学生对象列表 | 由学生对象组成 |

学生对象:

| 名称         | 类型              | 必填 | 说明                                                  |
| ------------ | ----------------- | ---- | ----------------------------------------------------- |
| name         | string            | 是   | 学生姓名                                              |
| id           | string            | 是   | 学生学号                                              |
| tableList    | tableList对象数组 | 是   | 记录了所有table对象的键名和可能存在的中文名组成的列表 |
| profileTable | table对象         | 否   | 可以允许记录数个文件                                  |
| choiceTable  | table对象         | 否   | 可以允许记录数个文件                                  |

tableList对象:

| 名称  | 类型   | 必填 | 说明             |
| ----- | ------ | ---- | ---------------- |
| name  | string | 是   | table对象的键名  |
| title | string | 否   | 可能存在的中文名 |

table对象:

| 名称     | 类型         | 必填 | 说明                                                     |
| -------- | ------------ | ---- | -------------------------------------------------------- |
| flag     | boolean      | 否   | 这项个人信息是否填写完毕(完毕为 true,未填写完整为 false) |
| fileList | 文件对象列表 | 是   | 由文件对象组成                                           |

文件对象:

| 名称   | 类型   | 必填 | 说明                                    |
| ------ | ------ | ---- | --------------------------------------- |
| url    | string | 是   | 文件 url                                |
| name   | string | 是   | 文件名                                  |
| status | string | 否   | 文件的传输状态(暂时没用 'success'/... ) |
| size   | int    | 否   | 文件大小                                |

#### 示例:

请求参数:

```javascript
{
  teaID: "199901010101",
  type: "regular"
}
```

返回参数:

```javascript
{
    tableList:[{
        name:'profileTable',
        title:'学生个人简介表'
    },{
        name:'choiceTable',
        title:'导师双向选择表'
    }],
    stuList:[{
        name:'张三',
        id:'201701010101',
        profileTable: {
          flag: true,
          fileList: [{
            name: '计算机学院本科学生导师选择学生个人简介表 (1).DOC',
            url: 'https://test-1301169585.cos.ap-shanghai.myqcloud.com/%E9%99%84%E4%BB%B6%E5%9B%9B%EF%BC%9A%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2%E6%9C%AC%E7%A7%91%E5%AD%A6%E7%94%9F%E5%AF%BC%E5%B8%88%E9%80%89%E6%8B%A9%E5%AD%A6%E7%94%9F%E4%B8%AA%E4%BA%BA%E7%AE%80%E4%BB%8B%E8%A1%A8%20(1).DOC',
            status:'success',
            size:1141
          }]
        },
        choiceTable: {
          flag: true,
          fileList: [{
            name: '计算机学院本科学生导师双向选择表 (1).docx',
            url: 'https://test-1301169585.cos.ap-shanghai.myqcloud.com/%E9%99%84%E4%BB%B6%E4%B8%80%EF%BC%9A%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2%E6%9C%AC%E7%A7%91%E5%AD%A6%E7%94%9F%E5%AF%BC%E5%B8%88%E5%8F%8C%E5%90%91%E9%80%89%E6%8B%A9%E8%A1%A8%20(1).docx'
          }]
        }
	},{
        name:'李四',
        id:'201701010101',
        profileTable: {
          flag: true,
          fileList: [{
            name: '计算机学院本科学生导师选择学生个人简介表 (1).DOC',
            url: 'https://test-1301169585.cos.ap-shanghai.myqcloud.com/%E9%99%84%E4%BB%B6%E5%9B%9B%EF%BC%9A%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2%E6%9C%AC%E7%A7%91%E5%AD%A6%E7%94%9F%E5%AF%BC%E5%B8%88%E9%80%89%E6%8B%A9%E5%AD%A6%E7%94%9F%E4%B8%AA%E4%BA%BA%E7%AE%80%E4%BB%8B%E8%A1%A8%20(1).DOC',
            status:'success',
            size:1141
          }]
        },
        choiceTable: {
          flag: true,
          fileList: [{
            name: '计算机学院本科学生导师双向选择表 (1).docx',
            url: 'https://test-1301169585.cos.ap-shanghai.myqcloud.com/%E9%99%84%E4%BB%B6%E4%B8%80%EF%BC%9A%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E9%99%A2%E6%9C%AC%E7%A7%91%E5%AD%A6%E7%94%9F%E5%AF%BC%E5%B8%88%E5%8F%8C%E5%90%91%E9%80%89%E6%8B%A9%E8%A1%A8%20(1).docx'
          }]
        }
	}]
}
```



## 选择学生/teacher/selectstu

URL:/teacher/selectstu

请求方法:POST

返回格式:JSON

#### 请求参数:

| 名称       | 类型   | 必填 | 说明               |
| ---------- | ------ | ---- | ------------------ |
| teaID      | string | 是   | 教师编号           |
| type       | string | 是   | 导师类型           |
| selStuList | 数组   | 是   | 学生选择情况的列表 |

学生选择情况:

| 名称   | 类型    | 必填 | 说明                               |
| ------ | ------- | ---- | ---------------------------------- |
| stuID  | string  | 是   | 学生编号                           |
| recept | boolean | 是   | 是否接收(true为接收,false为不接收) |

#### 返回参数:

| 名称    | 类型    | 说明     |
| ------- | ------- | -------- |
| success | boolean | 修改成功 |

#### 示例:

请求参数:

```javascript
{
  	teaID: "199901010101",
    type:"regular",
	selStuList:[{
        stuID:"201701010101",
        recept:true
    },{
        stuID:"201701010102",
        recept:false
    }]
}
```

返回参数:

```javascript
{
    success:true
}
```

